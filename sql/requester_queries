-- Queries

-- Requester queries


-- Check if all requestion labels exisits 


SELECT label_name 
FROM labels
WHERE label_name IN
(SELECT l.label_name 
FROM labels l
WHERE l.label_name
in ('Apple', 'protein_bar','Banana'));	
	
SELECT label_name 
FROM labels
WHERE label_name = 'Banana'

	
-- Check if all labels has enough images to train : threshold >= 100
SELECT label_name
FROM labels
WHERE label_name in ('Apple', 'Banana','protein_bar')
AND image_count < 100;
	
	
	

SELECT column_name(s)
FROM table_name
WHERE column_name operator ALL
(SELECT column_name FROM table_name WHERE condition);

	
	
-- Insert into requesting_label_watchlist
DELETE FROM requesting_label_watchlist;
INSERT INTO requesting_label_watchlist  (label_name, user_ids,last_requested_userid, new_requested_date ) VALUES

( 'Apple',ARRAY[1], 1, (SELECT NOW()) );
	
	
INSERT INTO requesting_label_watchlist (label_name, user_ids,last_requested_userid, new_requested_date ) VALUES

( 'Apple',ARRAY[1], 1, (SELECT NOW()) )
 ON CONFLICT (label_name)  
 DO
 UPDATE
 SET user_ids = array_append(requesting_label_watchlist.user_ids, 1),
 	 last_requested_userid = 1
 
 WHERE requesting_label_watchlist.label_name = 'Apple';
 
 

SELECT * 
FROM requesting_label_watchlist;
 
